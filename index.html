<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Upload Vídeo YouTube</title>
<style>
body { font-family: Arial, sans-serif; padding: 20px; max-width: 500px; margin: auto; }
input, button { width: 100%; margin: 10px 0; padding: 10px; }
#log { white-space: pre-wrap; background: #f5f5f5; padding: 10px; max-height: 300px; overflow-y: auto; }
</style>
</head>
<body>
<h2>Upload Vídeo YouTube</h2>
<form id="form">
  <input type="file" name="credentials" accept=".json" required>
  <input type="text" name="title" placeholder="Título" required>
  <textarea name="description" placeholder="Descrição" required></textarea>
  <input type="text" name="publishAt" placeholder="Data de publicação (YYYY-MM-DDTHH:MM:SSZ)" required>
  <input type="text" name="videoUrl" placeholder="URL do vídeo do Google Drive" required>
  <input type="file" name="thumbnail" accept="video/*" required>
  <button type="submit">Enviar</button>
</form>
<div id="log"></div>

<script>
const form = document.getElementById('form');
const log = document.getElementById('log');

form.addEventListener('submit', async (e) => {
  e.preventDefault();
  log.textContent = 'Processando...\n';
  const data = new FormData(form);
  try {
    const res = await fetch('/upload', { method: 'POST', body: data });
    const text = await res.text();
    try { 
      const json = JSON.parse(text);
      log.textContent += JSON.stringify(json, null, 2);
    } catch {
      log.textContent += text;
    }
  } catch (err) {
    log.textContent += 'Erro de rede: ' + err.message;
  }
});
</script>
</body>
</html>
